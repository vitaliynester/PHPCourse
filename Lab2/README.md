## Лабораторная работа №2 по PHP

### Задание:

Необходимо считать данные из XML файла. Записать полученные данные в базу данных. Получить все данные из БД и произвести сериализацию в JSON файл.

### Ход работы:

Для выполнения данной работы была сформирована следующая структура проекта:
```
├── Converter.php
├── Database.php
├── README.md
├── docker
│   ├── docker-compose.yaml
│   └── postgres
│       ├── Dockerfile
│       ├── database.env
│       └── init.sql
├── example.xml
├── index.php
└── settings.php

2 каталога, 10 файлов
```

Файл `Converter.php` содержит класс конвертера для преобразования данных XML->DB->JSON.

Файл `Database.php` содержит класс для взаимодействия с базой данных (подключение, запись и чтение данных).

Файл `example.xml` содержит базовый пример структуры XML файла с данными. В данном случае рассматриваются данные пользователей.

Файл `settings.php` содержит настройки подключения к базе данных. В данном работе используется база данных PostgreSQL 13.2.

Каталог `docker` включает в себя файл `docker-compose.yaml` для работы с контейнерами и каталог с настройками БД. Также, подключен `adminer` для наглядного представления данных в БД.

Для изменения базы данных на другую необходимо изменить настройки в файле `settings.php` и выполнить скрипт аналогичный тому, что представлен далее.

Пример SQL скрипта для создания таблицы:
```sql
CREATE TABLE xml_json_user (
    id serial PRIMARY KEY,
    name VARCHAR (100) NOT NULL,
    phone VARCHAR (50) NOT NULL,
    email VARCHAR (255) NOT NULL,
    address VARCHAR (255) NOT NULL
);
```

Пример конфига для базы данных:
```dotenv
POSTGRES_USER=xml_user
POSTGRES_PASSWORD=123
POSTGRES_DB=xml_data
```

### Запуск проекта

Для запуска данного проекта необходим установленный Docker и docker-compose. 

1. Перейдите в каталог `docker` и выполните команду `docker-compose up -d`.
2. После успешного запуска контейнеров подключитесь к `Adminer` (по умолчанию он будет доступен по [данной ссылке](http://localhost:8080/)) с данными указанными в файле `database.env`.
3. Для запуска скрипта необходимо выполнить следующую команду:`php index.php example.xml json_name.json`. 
   
    `example.xml` - название XML файла откуда будут браться данные;
   
    `json_name.json` - название результирующего JSON файла с данными. 